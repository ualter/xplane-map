<!DOCTYPE html>
<html>
<head>
<title>X-Plane Map</title>
<link rel="stylesheet" type="text/css" href="map.css" media="all"/>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCkS0sO3oxa5OOmH1ujaWYFLjKLOh6OSNw"></script>
<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.3.js"></script>
<script type="text/javascript" src="map.js"></script>
<script type="text/javascript" src="markerwithlabel.js"></script>
</head>
<body>
	<div id="panel" class="bl">
		<table id="planesTable">
			<tr class="topRow">
				<td title="Click to focus on this plane."><label><input type="radio" id="nofocus" name="plane"></label></td>
				<td title="Double-click to rename.">Name</td>
				<td title="Click to show or hide trace.">Trace</td>
				<td title="Click to reset the plane's trace.">Clear</td>
				<td title="Click to remove the plane.">Rmv</td>
			</tr>
			<tr class="planeRow" data-ip="ip">
				<td></td>
				<td>No plane yet</td>
				<td></td>
				<td></td>
				<td></td>
			</tr>
		</table>
		<p id="loading"></p>
		<span id="bottom-note">External Moving Map v1.1<br>Developed by <a href="mailto:foucauld.degeorges@gmail.com">Foucauld Degeorges</a> and released for free on <a href="http://forums.x-plane.org/index.php?app=downloads&showfile=25569">x-plane.org</a></span>
	</div>
	<div id="map-canvas-wrapper">
		<div id="map-canvas"></div>
		<div id="panel-button">Show panel (Tab)</div>
		<div id="navaids-button">Show navaids (N)</div>
	</div>
	<div id="errorBox">
	</div>
	<script type="text/javascript">
		$('input[name=plane]').change(function() {
			$('.planeRow').removeClass("followed");
			$('input[name=plane]:checked').parents('.planeRow').addClass("followed");

		});
		$('#showApt').change(function() {
			if(aptLayer == undefined) {
				aptLayer = new google.maps.Data();
				$('#loading').html('Loading airport data (3MB file) ...');
				
				aptLayer.setStyle({
					title: "Ualter",
					icon: {
						strokeColor: "#ffffff",
						path: google.maps.SymbolPath.CIRCLE
					}
				});
				aptLayer.loadGeoJson("apt.geojson");
				
				$('#loading').html('');
			}
			$('#loading').html('Applying airports ...');
			aptLayer.setMap(($(this).is(':checked') ? map : null));
			$('#loading').html('');
			
		});
		
		$('#panel-button').click(showPanel);
		$('#navaids-button').click(showNavaids);
		</script>
</body>
</html>